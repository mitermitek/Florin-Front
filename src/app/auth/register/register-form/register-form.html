<form [formGroup]="form" (ngSubmit)="onSubmit()" class="flex flex-col gap-y-4">
  <div class="flex flex-col gap-y-1">
    <label for="username" class="text-sm">Username</label>
    <input
      pInputText
      pSize="small"
      type="text"
      id="username"
      placeholder="Your username"
      autocomplete="username"
      formControlName="username"
      [invalid]="form.controls.username.invalid && form.controls.username.touched"
    />
    @if (form.controls.username.invalid && form.controls.username.touched) {
      @if (form.controls.username.errors?.['required']) {
        <p-message severity="error" size="small" variant="simple">Username is required.</p-message>
      }
      @if (form.controls.username.errors?.['minlength']) {
        <p-message severity="error" size="small" variant="simple">Username must be at least 3 characters long.</p-message>
      }
      @if (form.controls.username.errors?.['maxlength']) {
        <p-message severity="error" size="small" variant="simple">Username cannot exceed 50 characters.</p-message>
      }
    }
  </div>

  <div class="flex flex-col gap-y-1">
    <label for="email" class="text-sm">Email</label>
    <input
      pInputText
      pSize="small"
      type="email"
      id="email"
      placeholder="Your email"
      autocomplete="email"
      formControlName="email"
      [invalid]="form.controls.email.invalid && form.controls.email.touched"
    />
    @if (form.controls.email.invalid && form.controls.email.touched) {
      @if (form.controls.email.errors?.['required']) {
        <p-message severity="error" size="small" variant="simple">Email is required.</p-message>
      }
      @if (form.controls.email.errors?.['email']) {
        <p-message severity="error" size="small" variant="simple">Email must be a valid email address.</p-message>
      }
    }
  </div>

  <div class="flex flex-col gap-y-1">
    <label for="password" class="text-sm">Password</label>
    <input
      pInputText
      pSize="small"
      type="password"
      id="password"
      placeholder="Your password"
      autocomplete="new-password"
      formControlName="password"
      [invalid]="form.controls.password.invalid && form.controls.password.touched"
    />
    @if (form.controls.password.invalid && form.controls.password.touched) {
      @if (form.controls.password.errors?.['required']) {
        <p-message severity="error" size="small" variant="simple">Password is required.</p-message>
      }
      @if (form.controls.password.errors?.['minlength']) {
        <p-message severity="error" size="small" variant="simple">Password must be at least 8 characters long.</p-message>
      }
      @if (form.controls.password.errors?.['maxlength']) {
        <p-message severity="error" size="small" variant="simple">Password cannot exceed 100 characters.</p-message>
      }
    }
  </div>

  <div class="flex flex-col gap-y-1">
    <label for="confirmPassword" class="text-sm">Confirm Password</label>
    <input
      pInputText
      pSize="small"
      type="password"
      id="confirmPassword"
      autocomplete="new-password"
      placeholder="Confirm your password"
      formControlName="confirmPassword"
      [invalid]="(form.controls.password.invalid && form.controls.password.touched) || (form.controls.confirmPassword.touched && form.errors?.['passwordMismatch'])"
    />
    @if (form.controls.confirmPassword.touched && form.errors?.['passwordMismatch']) {
      <p-message severity="error" size="small" variant="simple">Passwords do not match.</p-message>
    }
  </div>

  <button pButton size="small" type="submit">
    <span pButtonLabel>Sign up</span>
  </button>
</form>
