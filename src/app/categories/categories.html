<div class="card">
  <p-panel header="Categories">
    <ng-template #icons>
      <button pButton type="button" icon="pi pi-plus" (click)="onCreate()" size="small"></button>
    </ng-template>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
      @for (category of categories$ | async; track category.id) {
      <div class="card surface-card bg-gray-50 p-2 rounded-lg">
        <div class="flex justify-between items-center">
          <p>{{ category.name }}</p>
          <div class="flex gap-2">
            <p-button
              icon="pi pi-pencil"
              severity="secondary"
              (onClick)="onEdit(category)"
              [rounded]="true"
              [outlined]="true"
            />
            <p-button
              icon="pi pi-trash"
              severity="danger"
              (onClick)="onDelete(category)"
              [rounded]="true"
              [outlined]="true"
            />
          </div>
        </div>
      </div>
      }
    </div>

    <div class="card flex justify-center mt-4">
      <p-paginator
        (onPageChange)="onPageChange($event)"
        [first]="first"
        [rows]="rows"
        [totalRecords]="totalRecords"
        [rowsPerPageOptions]="[10, 20, 30, 40, 50]"
        [pageLinkSize]="5"
      />
    </div>

    <p-dialog
      header="Category"
      [modal]="true"
      position="top"
      draggable="false"
      resizable="false"
      [(visible)]="showDialog"
      [style]="{ width: '512px' }"
      (onHide)="onDialogHide()"
    >
      @if (showDialog) {
      <app-category-form
        #categoryForm
        [category]="selectedCategory()"
        (categorySubmit)="onSave($event)"
      />

      <ng-template #footer>
        <p-button label="Cancel" [outlined]="true" severity="secondary" (click)="onDialogHide()" />
        <p-button label="Save" severity="primary" (click)="categoryFormRef()?.onSubmit()" />
      </ng-template>
      }
    </p-dialog>
  </p-panel>
</div>
